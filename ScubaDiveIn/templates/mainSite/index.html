{% extends '../base.html' %}
{% load static %}
{% load course_filters %}

{% block title %}Scuba Diving in Andaman – Explore the Best Diving Spots & Packages{% endblock %}

{% block desription %}Discover the beauty of scuba diving in Andaman! Explore crystal-clear waters, vibrant coral reefs, and diverse marine life. Book the best scuba diving packages for an unforgettable underwater adventure.{% endblock %}

{% block content %}
<!-- Hero Section with Video Background -->
<section class="relative h-screen flex items-center justify-center overflow-hidden pt-20">
  <div class="absolute inset-0 z-0">
    <video autoplay muted loop class="w-full h-full object-cover">
      <source src="{% static 'videos/hero-video.mp4' %}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="absolute inset-0 bg-deep-blue opacity-50"></div>
  </div>
  <div class="container mx-auto px-[5%] relative z-10 text-center text-white">
    <h1 class="text-4xl font-bold md:text-5xl lg:text-6xl mb-6">Dive Into a World of Adventure</h1>
    <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Discover the magic beneath the waves with our internationally certified scuba diving courses</p>
    <div class="flex flex-wrap justify-center gap-4">
      <a href="{% url 'coursesPage' %}" class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-coral bg-coral text-white hover:bg-white hover:text-coral px-8 py-4 text-lg">
        Explore Courses
      </a>
      <button onclick="openVideoPopup()" class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-white text-white bg-transparent hover:bg-white hover:text-deep-blue px-8 py-4 text-lg">
        Watch Intro Video
      </button>
      
      <!-- Video Popup Container (initially hidden) -->
      <div id="videoPopup" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="relative w-full max-w-4xl px-4">
          <button onclick="closeVideoPopup()" class="absolute -top-10 right-0 text-white text-2xl">&times;</button>
          <div class="aspect-w-16 aspect-h-9">
            <iframe id="youtubeVideo" class="w-full h-[500px]" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>
      </div>
      
      <script>
        function openVideoPopup() {
          const popup = document.getElementById('videoPopup');
          const iframe = document.getElementById('youtubeVideo');
          
          // Replace 'YOUTUBE_VIDEO_ID' with your actual YouTube video ID
          iframe.src = 'https://www.youtube.com/embed/KvZT3etZIsw?si=wpMzZfJbvJjuOcNV';
          
          popup.classList.remove('hidden');
          document.body.style.overflow = 'hidden'; // Prevent scrolling
        }
      
        function closeVideoPopup() {
          const popup = document.getElementById('videoPopup');
          const iframe = document.getElementById('youtubeVideo');
          
          iframe.src = ''; // Stop the video
          popup.classList.add('hidden');
          document.body.style.overflow = ''; // Restore scrolling
        }
      </script>
    </div>
  </div>
  <div class="absolute bottom-8 left-0 right-0 text-center">
    <a href="#courses" class="animate-bounce inline-block">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
      </svg>
    </a>
  </div>
</section>

<!-- Certification Badges Section -->
<section class="py-12 bg-white">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Internationally Recognized Certifications</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">Our courses are accredited by the world's leading scuba diving organizations</p>
    </div>
    <!-- <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-8 items-center justify-center">
      <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      > -->
      <div class="grid items-center justify-center mx-auto">
        <div class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0">
        <img
          src="{% static 'images/padi-logo.png' %}"
          alt="PADI logo"
          class="max-h-36 md:max-h-42"
        />
      </div>
      <!-- <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      >
        <img
          src="https://w7.pngwing.com/pngs/739/337/png-transparent-ssi-hd-logo.png"
          alt="SSI logo"
          class="max-h-12 md:max-h-14"
        />
      </div>
      <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      >
        <img
          src="https://cdn.freebiesupply.com/logos/thumbs/2x/naui-logo.png"
          alt="NAUI logo"
          class="max-h-12 md:max-h-14"
        />
      </div>
      <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      >
        <img
          src="https://i.vimeocdn.com/player/374102?sig=58cd0e6db1d3b4dd1d1c5d52e4a6bfeed58e7a93c1ed9c2ffa1dd379292d66e6&v=1"
          alt="BSAC logo"
          class="max-h-12 md:max-h-14"
        />
      </div>
      <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      >
        <img
          src="https://cdn.freelogovectors.net/wp-content/uploads/2020/04/cmas-world-underwater-federation-logo.png"
          alt="CMAS logo"
          class="max-h-12 md:max-h-14"
        />
      </div>
      <div
        class="flex items-start justify-center justify-self-center px-4 py-3 md:p-0"
      >
        <img
          src="https://events.trebound.com/_next/image?url=%2F66f54b982ce090736e4e4d1c_Tewbound%20Hover.png&w=1920&q=75"
          alt="Trebound logo"
          class="max-h-12 md:max-h-14"
        />
      </div> -->
    </div>
  </div>
</section>

<!-- Featured Courses Section -->
<section id="courses" class="py-16 bg-gradient-to-b from-white to-wave">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Our Popular Courses</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">From beginners to professionals, we have the perfect course for your diving journey</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for course in featured_courses %}
      <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
        <div class="relative h-48 overflow-hidden">
          {% if course.featured_image %}
          <img src="{{ course.featured_image.url }}" alt="{{ course.name }}" class="w-full h-full object-cover">
          {% else %}
          <img src="{% static 'images/default-course.jpg' %}" alt="{{ course.name }}" class="w-full h-full object-cover" onerror="this.src='https://res.cloudinary.com/padi/image/upload/f_auto,q_90,w_auto,dpr_auto/v1743670865/CDN/commerce/60462-1B2C.jpg'">
          {% endif %}
          <div class="absolute inset-0 bg-gradient-to-t from-deep-blue/80 to-transparent"></div>
          <div class="absolute bottom-4 left-4">
            <span class="bg-{% if course.difficulty_level == 'beginner' %}coral{% elif course.difficulty_level == 'intermediate' %}sea-green{% else %}ocean-blue{% endif %} text-white text-sm font-semibold px-3 py-1 rounded-full">
              {{ course.get_difficulty_level_display }}
            </span>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-deep-blue mb-2">{{ course.name }}</h3>
          <p class="text-ocean-blue mb-4">{{ course.short_description }}</p>
          <div class="flex justify-between items-center">
            <div>
              <span class="text-sea-green font-bold">₹{{ course.price }}</span>
              {% with mins=course.duration|default:1440 %}
              <span class="text-sm text-gray-500 ml-2">({{ mins|floatformat:0|default:"1" }} mins)</span>
              {% endwith %}
            </div>
            <a href="{% url 'courseDetailPage' course.slug %}" class="text-sea-green hover:underline">
              <button class="rounded-full inline-flex items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-ocean-blue text-ocean-blue bg-white hover:bg-ocean-blue hover:text-white px-4 py-2 text-sm">
                Learn More
              </button>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center text-ocean-blue">
        <p>No featured courses available at the moment. Check back soon!</p>
      </div>
      {% endfor %}
    </div>
    
    <div class="text-center mt-12">
      <a href="{% url 'coursesPage' %}" class="text-sea-green hover:underline">
        <button class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-coral bg-coral text-white hover:bg-white hover:text-coral px-8 py-3">
          View All Courses
        </button>
      </a>
    </div>
  </div>
</section>

<!-- Featured Dive Locations Section -->
<section class="py-16 bg-gradient-to-b from-wave to-white">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Explore Our Dive Sites</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">Discover the most breathtaking diving locations in the Andaman Islands</p>
      </div>
      
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for location in featured_locations %}
      <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
        <div class="relative h-48 overflow-hidden">
          {% if location.featured_image %}
          <img src="{{ location.featured_image.url }}" alt="{{ location.name }}" class="w-full h-full object-cover">
          {% else %}
          <img src="{% static 'images/default-location.jpg' %}" alt="{{ location.name }}" class="w-full h-full object-cover" 
               onerror="this.src='https://images.unsplash.com/photo-1682687982501-1e58ab814714?q=80&w=1470&auto=format&fit=crop'">
          {% endif %}
          <div class="absolute inset-0 bg-gradient-to-t from-deep-blue/80 to-transparent"></div>
          <div class="absolute bottom-4 left-4">
            <span class="bg-ocean-blue text-white text-sm font-semibold px-3 py-1 rounded-full">
              {{ location.depth_range_min }}-{{ location.depth_range_max }}m
            </span>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-deep-blue mb-2">{{ location.name }}</h3>
          <p class="text-ocean-blue mb-4">{{ location.short_description }}</p>
          <div class="flex justify-between items-center">
            <div>
              <span class="text-sm text-gray-500">{{ location.boat_ride_duration }} min boat ride</span>
            </div>
            <a href="{% url 'diveLocationDetail' location.slug %}" class="text-sea-green hover:underline">
              <button class="rounded-full inline-flex items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-ocean-blue text-ocean-blue bg-white hover:bg-ocean-blue hover:text-white px-4 py-2 text-sm">
                View Details
              </button>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center text-ocean-blue">
        <p>No featured dive locations available at the moment. Check back soon!</p>
      </div>
      {% endfor %}
    </div>
    
    <div class="text-center mt-12">
      <a href="{% url 'diveLocationsPage' %}" class="text-sea-green hover:underline">
        <button class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-coral bg-coral text-white hover:bg-white hover:text-coral px-8 py-3">
          Explore All Locations
        </button>
      </a>
    </div>
  </div>
</section>

<!-- Featured Events Section -->
<section class="py-16 bg-gradient-to-b from-white to-wave">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Upcoming Events</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">Join our exciting diving events and activities</p>
      </div>
      
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {% for event in featured_events %}
      <div class="bg-white rounded-xl shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
        <div class="relative h-48 overflow-hidden">
          {% if event.featured_image %}
          <img src="{{ event.featured_image.url }}" alt="{{ event.name }}" class="w-full h-full object-cover">
          {% else %}
          <img src="{% static 'images/default-event.jpg' %}" alt="{{ event.name }}" class="w-full h-full object-cover"
               onerror="this.src='https://images.unsplash.com/photo-1682687982501-1e58ab814714?q=80&w=1470&auto=format&fit=crop'">
          {% endif %}
          <div class="absolute inset-0 bg-gradient-to-t from-deep-blue/80 to-transparent"></div>
          <div class="absolute bottom-4 left-4">
            <span class="bg-coral text-white text-sm font-semibold px-3 py-1 rounded-full">
              {{ event.event_date|date:"M d, Y" }}
            </span>
          </div>
        </div>
        <div class="p-6">
          <h3 class="text-xl font-bold text-deep-blue mb-2">{{ event.name }}</h3>
          <p class="text-ocean-blue mb-4">{{ event.short_description }}</p>
          <div class="flex justify-between items-center">
            <div>
              <span class="text-sea-green font-bold">₹{{ event.price }}</span>
              <span class="text-sm text-gray-500 ml-2">({{ event.duration }} min)</span>
            </div>
            <a href="{% url 'eventDetail' event.slug %}" class="text-sea-green hover:underline">
              <button class="rounded-full inline-flex items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-ocean-blue text-ocean-blue bg-white hover:bg-ocean-blue hover:text-white px-4 py-2 text-sm">
                Learn More
              </button>
            </a>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-span-full text-center text-ocean-blue">
        <p>No upcoming events available at the moment. Check back soon!</p>
      </div>
      {% endfor %}
    </div>
    
    <div class="text-center mt-12">
      <a href="{% url 'eventsPage' %}" class="text-sea-green hover:underline">
      <button class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-coral bg-coral text-white hover:bg-white hover:text-coral px-8 py-3">
          View All Events
      </button>
      </a>
    </div>
  </div>
</section>

<!-- Why Choose Us Section -->
<section class="py-16 bg-white">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Why Choose Our Diving School</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">We're committed to providing the best diving education with a personal touch</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
      <!-- Feature 1 -->
      <div class="text-center p-6 rounded-lg bg-wave">
        <div class="w-16 h-16 bg-ocean-blue rounded-full flex items-center justify-center mx-auto mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15l8-8m0 0l-8-8m8 8H4" />
          </svg>
        </div>
        <h3 class="text-xl font-bold text-deep-blue mb-2">Small Group Sizes</h3>
        <p class="text-ocean-blue">Maximum 4 students per instructor for personalized attention and safety.</p>
      </div>
      
      <!-- Feature 2 -->
      <div class="text-center p-6 rounded-lg bg-wave">
        <div class="w-16 h-16 bg-sea-green rounded-full flex items-center justify-center mx-auto mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
        </div>
        <h3 class="text-xl font-bold text-deep-blue mb-2">Safety First</h3>
        <p class="text-ocean-blue">Our safety record is impeccable with modern equipment and protocols.</p>
      </div>
      
      <!-- Feature 3 -->
      <div class="text-center p-6 rounded-lg bg-wave">
        <div class="w-16 h-16 bg-coral rounded-full flex items-center justify-center mx-auto mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
        </div>
        <h3 class="text-xl font-bold text-deep-blue mb-2">Fast Certification</h3>
        <p class="text-ocean-blue">Efficient training programs that get you certified quickly without compromising quality.</p>
      </div>
      
      <!-- Feature 4 -->
      <div class="text-center p-6 rounded-lg bg-wave">
        <div class="w-16 h-16 bg-sand rounded-full flex items-center justify-center mx-auto mb-4">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
          </svg>
        </div>
        <h3 class="text-xl font-bold text-deep-blue mb-2">Global Recognition</h3>
        <p class="text-ocean-blue">Certifications recognized worldwide at over 6,000 dive centers and resorts.</p>
      </div>
    </div>
  </div>
</section>

<!-- Testimonials Section -->
<section class="py-16 bg-white">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">What Our Divers Say</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">Hear from certified divers who started their journey with us</p>
    </div>
    
    <iframe src='https://widgets.sociablekit.com/google-reviews/iframe/25558141' frameborder='0' width='100%' height='1000'></iframe>
  </div>
</section>

<!-- FAQ Section -->
<section class="py-16 bg-white">
  <div class="container mx-auto px-[5%]">
    <div class="text-center mb-16">
      <h2 class="text-3xl font-bold text-deep-blue mb-4">Frequently Asked Questions</h2>
      <p class="text-ocean-blue max-w-2xl mx-auto">Find answers to common questions about scuba diving and our courses</p>
    </div>
    
    <div class="max-w-3xl mx-auto">
      {% for faq in featured_faqs %}
      <div class="mb-6 {% if not forloop.last %}border-b border-ocean-blue/20 pb-6{% endif %}">
        <button class="faq-toggle flex w-full items-center justify-between text-left group">
          <h3 class="text-lg font-semibold text-deep-blue group-hover:text-coral">{{ faq.question }}</h3>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-ocean-blue group-hover:text-coral transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="faq-content mt-4 text-ocean-blue hidden">
          <p>{{ faq.answer }}</p>
        </div>
      </div>
      {% empty %}
      <!-- Show default FAQs if no FAQs in database -->
      <div class="mb-6 border-b border-ocean-blue/20 pb-6">
        <button class="faq-toggle flex w-full items-center justify-between text-left group">
          <h3 class="text-lg font-semibold text-deep-blue group-hover:text-coral">How old do I need to be to learn scuba diving?</h3>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-ocean-blue group-hover:text-coral transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div class="faq-content mt-4 text-ocean-blue hidden">
          <p>The minimum age is 10 years old for the Junior Open Water Diver certification. From age 15, divers can earn the standard Open Water Diver certification. There's no maximum age as long as you're in good health.</p>
        </div>
      </div>
      {% endfor %}
    </div>
    
    <div class="text-center mt-12">
      <a href="{% url 'faqPage' %}" class="rounded-full inline-flex gap-3 items-center justify-center whitespace-nowrap transition-all duration-200 ease-in-out disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none border-2 border-ocean-blue text-ocean-blue bg-white hover:bg-ocean-blue hover:text-white px-8 py-3">
        View All FAQs
      </a>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqToggles = document.querySelectorAll('.faq-toggle');
    
    faqToggles.forEach(toggle => {
      toggle.addEventListener('click', function() {
        // Toggle the answer visibility with animation
        const answer = this.nextElementSibling;
        const icon = this.querySelector('svg');
        
        if (answer.classList.contains('hidden')) {
          // Show the answer
          answer.classList.remove('hidden');
          answer.style.maxHeight = answer.scrollHeight + 'px';
          icon.classList.add('rotate-180');
        } else {
          // Hide the answer
          answer.style.maxHeight = '0px';
          icon.classList.remove('rotate-180');
          setTimeout(() => {
            answer.classList.add('hidden');
          }, 300);
        }
        
        // Close other FAQs
        faqToggles.forEach(otherToggle => {
          if (otherToggle !== toggle) {
            const otherAnswer = otherToggle.nextElementSibling;
            const otherIcon = otherToggle.querySelector('svg');
            otherAnswer.classList.add('hidden');
            otherAnswer.style.maxHeight = '0px';
            otherIcon.classList.remove('rotate-180');
          }
        });
      });
    });
  });
</script>

<style>
  .faq-content {
    transition: max-height 0.3s ease-out;
    max-height: 0;
    overflow: hidden;
  }
  
  .faq-content:not(.hidden) {
    max-height: 500px;
  }
</style>

{% endblock %}